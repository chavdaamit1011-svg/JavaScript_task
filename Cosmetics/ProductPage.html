<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Detail</title>

 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <style>
        .product-page {
            display: flex;
            gap: 40px;
            padding: 40px 8%;
        }

        .product-images img {
            width: 100%;
            border-radius: 12px;
            box-shadow: 0 0 10px #ddd;
        }

        .shade-box span.active-shade {
            border: 3px solid #000 !important;
        }

        #addCartBtn:hover {
            transform: scale(1.05);
            transition: 0.2s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
    </style>
</head>

<body class="pt-5">

    <div id="sugar-navbar"></div>

    <div class="container mt-4 animate__animated animate__fadeInUp">

        <div id="productDetail" class="row g-4"></div>

    </div>

<script>
    const product = JSON.parse(localStorage.getItem("selectedProduct"));

    document.getElementById("productDetail").innerHTML = `
        <div class="col-md-6 animate__animated animate__zoomIn">
            <img src="${product.img}" class="detail-img">
        </div>

        <div class="col-md-6 animate__animated animate__fadeInRight">
            <h2 class="product-title fw-bold">${product.name}</h2>

            <div class="price fw-bold fs-3">‚Çπ${product.price}</div>

            <div class="rating-box bg-light px-3 py-2 rounded fw-bold">
                ‚≠ê ${product.rating} / 5
            </div>

            <div class="offer-box bg-warning-subtle p-3 rounded mt-3 border-start border-4 border-warning">
                üéâ Buy 2 Get 1 FREE | Code: <b>SUGAR3</b><br>
                üöö Free Delivery above ‚Çπ499
            </div>

            <div class="shade-label mt-3 fw-bold">Available Shades</div>

            <div class="shade-box mt-2">
                ${product.colors.map(c => `
                    <span class="shade-circle" style="background:${c}; width:26px; height:26px; border-radius:50%; border:2px solid #ccc; cursor:pointer;"></span>
                `).join("")}
            </div>

            <button class="add-btn btn btn-dark w-100 mt-4" id="addCartBtn">
                Add To Cart
            </button>
        </div>
    `;

   
    // COLOR SHADE SELECT WORKING
  
    document.querySelectorAll(".shade-circle").forEach(shade => {
        shade.addEventListener("click", () => {
            document.querySelectorAll(".shade-circle").forEach(s => s.classList.remove("active-shade"));
            shade.classList.add("active-shade");
        });
    });


    // ADD TO CART WORKING
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    function updateCartBtn() {
        let btn = document.getElementById("addCartBtn");
        let exists = cart.some(p => p.name === product.name);

        if (exists) {
            btn.innerText = "‚úî Added";
            btn.classList.remove("btn-dark");
            btn.classList.add("btn-success");
        } else {
            btn.innerText = "Add To Cart";
            btn.classList.remove("btn-success");
            btn.classList.add("btn-dark");
        }
    }

    updateCartBtn();

    document.getElementById("addCartBtn").addEventListener("click", () => {
        if (!localStorage.getItem("isLoggedIn")) {
            alert("Please login first!");
            window.location.href = "login.html";
            return;
        }

        let exists = cart.some(p => p.name === product.name);

        if (exists) {
            cart = cart.filter(p => p.name !== product.name);
        } else {
            cart.push(product);
        }

        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartBtn();
        updateCartCount();
    });

 


    function updateCartCount() {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        let tag = document.getElementById("cart-count");
        if (tag) tag.innerText = cart.length;
    }

    updateCartCount();
</script>

<footer id="sugar-footer"></footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="commen.js"></script>

</body>
</html>
