<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Add To Cart </title>

  
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
       
        body {
            background: #fff;
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            color: #222;
        }

        .cart-title {
            letter-spacing: 6px;
            text-transform: uppercase;
            font-weight: 400;
            color: #666;
        }

        .product-row {
            border-bottom: 1px solid #eee;
            padding: 18px 0;
            align-items: center;
        }

        .prod-thumb {
            width: 110px;
            height: 110px;
            object-fit: cover;
            border-radius: 8px;
        }

        .prod-name {
            font-size: 15px;
            letter-spacing: 0.6px;
            color: #222;
            font-weight: 600;
        }

        .prod-meta {
            font-size: 12px;
            color: #777;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .remove-link {
            font-size: 13px;
            color: #c0392b;
            background: none;
            border: none;
            padding: 0;
        }

        .qty-box {
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid #e6e6e6;
            width: 120px;
            justify-content: center;
            padding: 6px;
            border-radius: 6px;
        }

        .qty-btn {
            width: 32px;
            height: 32px;
            border-radius: 4px;
            border: 1px solid #ddd;
            background: #fff;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .qty-input {
            width: 40px;
            text-align: center;
            border: none;
            font-weight: 600;
        }

        .price-col {
            text-align: right;
            min-width: 120px;
        }

        .price-rupee {
            font-weight: 700;
            font-size: 16px;
        }

        .price-small {
            color: #777;
            font-size: 13px;
        }

        /* Price details card */
        .price-card {
            position: sticky;
            top: 110px;
            border-radius: 8px;
            padding: 18px;
            border: 1px solid #eee;
            background: #fafafa;
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .total-bar {
            background: #111;
            color: #fff;
            padding: 12px 16px;
            border-radius: 6px;
            text-align: center;
            margin-top: 12px;
        }

        .checkout-btn {
            width: 100%;
            border-radius: 6px;
            padding: 12px;
        }

        /* responsive tweaks */
        @media (max-width:991px) {
            .price-card {
                position: static;
                margin-top: 18px;
            }

            .prod-thumb {
                width: 90px;
                height: 90px;
            }

            .qty-box {
                width: 110px;
            }
        }
    </style>
</head>

<body>


    <div id="sugar-navbar"></div>

    <div class="container py-4">

        <br><br><br>
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="cart-title">Cart</h2>
            <!-- cart count can be updated with updateCartCount() if header exists -->
            <div>
                <a href="homepage.html" class="text-decoration-none text-muted">Continue Shopping</a>
            </div>
        </div>

        <div class="row">
            <!-- LEFT: Products -->
            <div class="col-lg-8">
                <!-- table header (visual) -->
                <div class="d-none d-lg-flex fw-semibold text-muted mb-2" style="font-size:13px;">
                    <div class="flex-grow-1">Product</div>
                    <div style="width:120px; text-align:center;">Quantity</div>
                    <div style="width:140px; text-align:right;">Total</div>
                </div>

                <div id="cart-products" class="bg-white rounded-3 shadow-sm p-3">
                    <!-- products will be injected here -->
                </div>

                <div id="empty-box" class="text-center py-5 text-muted" style="display:none;">
                    Your cart is empty ðŸ›’
                </div>

            </div>

            <!-- RIGHT: Price details -->
            <div class="col-lg-4">
                <div class="price-card">
                    <h6 class="mb-3">PRICE DETAILS</h6>

                    <div class="price-row"><span>Subtotal</span><span id="subTotal">â‚¹0</span></div>
                    <div class="price-row"><span>Shipping</span><span id="shipping">â‚¹50</span></div>
                    <div class="price-row"><span>GST (18%)</span><span id="gst">â‚¹0</span></div>

                    <hr>

                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h5 class="mb-0">Total Amount</h5>
                        <h5 id="totalAmount" class="mb-0">â‚¹0</h5>
                    </div>

                    <button id="checkoutBtn" class="btn btn-dark checkout-btn"
                        onclick="window.location.href = 'checkout.html'">Proceed to Checkout</button>
                    <p class="mt-3 mb-0 text-muted small">Tax included and shipping calculated at checkout.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS (optional for dropdowns) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <hr>

    <section class="container-fluid py-5 features-box">
        <div class="row text-center">

            <div class="col-12 col-md-4 mb-4">
                <i class="bi bi-bag fs-1"></i>
                <h6 class="mt-2">EASY RETURNS</h6>
            </div>

            <div class="col-12 col-md-4 mb-4">
                <i class="bi bi-flower3 fs-1"></i>
                <h6 class="mt-2">CRUELTY FREE</h6>
            </div>

            <div class="col-12 col-md-4 mb-4">
                <i class="bi bi-award fs-1"></i>
                <h6 class="mt-2">QUALITY FIRST</h6>
            </div>

        </div>
    </section>

    <script>
       
        function formatRupee(num) {
           
            return "â‚¹" + (Number.isInteger(num) ? num : num.toFixed(2));
        }

      
        function getPriceValue(priceStr) {
            if (typeof priceStr === 'number') return priceStr;
            return Number(String(priceStr).replace(/[^0-9.-]+/g, "")) || 0;
        }

        // Update cart icon count if header exists (#cart-count)
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            const el = document.getElementById("cart-count");
            if (el) el.innerText = cart.reduce((s, i) => s + (i.qty ? Number(i.qty) : 1), 0);
        }

        // Render cart items
        function renderCart() {
            const raw = JSON.parse(localStorage.getItem("cart")) || [];
            const cart = raw.map(item => {
                return Object.assign({}, item, { qty: item.qty ? Number(item.qty) : 1 });
            });

            const container = document.getElementById("cart-products");
            const emptyBox = document.getElementById("empty-box");

            if (cart.length === 0) {
                container.style.display = "none";
                emptyBox.style.display = "block";
                updateTotals([]);
                updateCartCount();
                return;
            } else {
                container.style.display = "block";
                emptyBox.style.display = "none";
            }

            
            container.innerHTML = cart.map((item, idx) => {
                const priceVal = getPriceValue(item.price);
                const lineTotal = priceVal * item.qty;
                
                return `
          <div class="d-flex product-row">
            <div class="d-flex align-items-center flex-grow-1 gap-3">
              <img src="${item.img || 'https://via.placeholder.com/150'}" class="prod-thumb">
              <div>
                <div class="prod-name">${item.name}</div>
                <div class="prod-meta">${item.price} â€¢ ${item.colors ? (item.colors.join(', ')) : ''}</div>
                <div class="mt-2 d-lg-none">
                  <button class="btn remove-link small text-danger" data-index="${idx}" data-action="remove">Remove</button>
                </div>
              </div>
            </div>

            <div style="width:150px;display:flex;justify-content:center;align-items:center;">
              <div class="qty-box">
                <button class="qty-btn" data-index="${idx}" data-action="decrease">âˆ’</button>
                <input class="qty-input" data-index="${idx}" value="${item.qty}" />
                <button class="qty-btn" data-index="${idx}" data-action="increase">+</button>
              </div>
            </div>

            <div class="price-col">
              <div class="price-rupee">${formatRupee(lineTotal)}</div>
              <div class="price-small d-none d-lg-block mt-2">
                <button class="btn remove-link" data-index="${idx}" data-action="remove">Remove</button>
              </div>
            </div>
          </div>
        `;
            }).join("");

           
            container.querySelectorAll('[data-action]').forEach(btn => {
                btn.addEventListener('click', function (e) {
                    const action = this.getAttribute('data-action');
                    const index = Number(this.getAttribute('data-index'));
                    if (action === 'increase') changeQty(index, 1);
                    if (action === 'decrease') changeQty(index, -1);
                    if (action === 'remove') removeItem(index);
                });
            });

            container.querySelectorAll('.qty-input').forEach(inp => {
                inp.addEventListener('change', function () {
                    const idx = Number(this.getAttribute('data-index'));
                    let v = Number(this.value) || 1;
                    if (v < 1) v = 1;
                    setQty(idx, v);
                });
               
                inp.addEventListener('input', function () {
                    this.value = this.value.replace(/[^\d]/g, '');
                });
            });

            updateTotals(cart);
            updateCartCount();
        }

        
        function changeQty(index, delta) {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            if (!cart[index]) return;
            let qty = Number(cart[index].qty || 1) + delta;
            if (qty < 1) qty = 1;
            cart[index].qty = qty;
            localStorage.setItem("cart", JSON.stringify(cart));
            renderCart();
        }

       
        function setQty(index, qty) {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            if (!cart[index]) return;
            if (qty < 1) qty = 1;
            cart[index].qty = qty;
            localStorage.setItem("cart", JSON.stringify(cart));
            renderCart();
        }


        function removeItem(index) {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            if (!cart[index]) return;
            cart.splice(index, 1);
            localStorage.setItem("cart", JSON.stringify(cart));
            renderCart();
        }

        // Calculate totals and update price card
        function updateTotals(cart) {
            const items = cart || (JSON.parse(localStorage.getItem("cart")) || []).map(i => Object.assign({}, i, { qty: i.qty ? Number(i.qty) : 1 }));
            const subtotal = items.reduce((s, it) => s + getPriceValue(it.price) * (it.qty || 1), 0);
            const shipping = items.length > 0 ? 50 : 0; 
            const gst = subtotal * 0.18;
            const total = subtotal + gst + shipping;

            document.getElementById("subTotal").innerText = formatRupee(subtotal);
            document.getElementById("shipping").innerText = formatRupee(shipping);
            document.getElementById("gst").innerText = formatRupee(Number(gst.toFixed(2)));
            document.getElementById("totalAmount").innerText = formatRupee(Number(total.toFixed(2)));
        }

       
        function seedDemoIfEmpty() {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            if (cart.length === 0) {
                const demo = [
                    { name: "Glide Peptide Plumping Gloss Stick", price: "â‚¹699", img: "https://www.sugarcosmetics.com/cdn/shop/files/Partner-In-Shine-Transferproof-Lip-Gloss-2_13cdf470.jpg?v=1743681799&width=500", qty: 2 },
                    { name: "Matte As Hell Crayon Lipstick", price: "â‚¹949", img: "https://www.sugarcosmetics.com/cdn/shop/files/Matte-As-Hell-Crayon-Lipstick-Kit-2.jpg?v=1763467826&width=500", qty: 1 }
                ];
                localStorage.setItem("cart", JSON.stringify(demo));
            }
        }

      
        document.getElementById('checkoutBtn').addEventListener('click', function () {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            if (cart.length === 0) { alert("Your cart is empty."); return; }
            const subtotal = cart.reduce((s, it) => s + getPriceValue(it.price) * (it.qty || 1), 0);
            const gst = subtotal * 0.18;
            const shipping = 50;
            const total = subtotal + gst + shipping;
            
        });

       
        (function init() {
        
            renderCart();
            updateCartCount();
        })();

       
        window.updateCartCount = updateCartCount;

    </script>



    <footer id="sugar-footer"></footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="commen.js"></script>
</body>

</html>