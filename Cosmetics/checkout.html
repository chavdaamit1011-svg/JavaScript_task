<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        .order-box { border: 1px solid #ddd; border-radius: 8px; padding: 15px; }
        .order-item { display: flex; gap: 12px; margin-bottom: 15px; }
        .order-item img { width: 70px; border-radius: 6px; }
        .summary-row { display: flex; justify-content: space-between; margin-bottom: 6px; }
        .form-section { border: 1px solid #ddd; border-radius: 8px; padding: 20px; }
        .place-order-btn { background: black; color: white; padding: 12px; width: 100%; border-radius: 5px; border: none; margin-top: 20px; }
        .pay-box { border: 1px solid #ccc; padding: 10px; border-radius:6px; cursor:pointer; display:flex; align-items:center; gap:10px; margin-bottom:10px; }
        .pay-box.active { border:2px solid black; background:#f5f5f5; }

        .success-box { max-width: 450px; border:1px solid #ddd; border-radius:12px; padding:30px; text-align:center; }
        .success-box i { font-size:65px; color:green; }
    </style>
</head>

<body>

<div id="checkout-page">

<div class="container mt-4 mb-5">
    <div class="row g-4">

       
        <div class="col-md-4">
            <div class="order-box">
                <h5 class="mb-3">Order Summary</h5>
                <div id="order-summary-items"></div>
                <hr>
                <div class="summary-row"><span>Subtotal</span><span id="subtotal">₹0</span></div>
                <div class="summary-row"><span>GST (18%)</span><span id="gst">₹0</span></div>
                <div class="summary-row"><span>Shipping</span><span>₹50</span></div>
                <hr>
                <div class="summary-row fw-bold"><span>Total</span><span id="totalAmount">₹0</span></div>
            </div>
        </div>

      
        <div class="col-md-8">
            <div class="form-section">
                <h5 class="mb-3">Shipping Information</h5>

                <form id="checkoutForm">
                    <div class="row g-3">

                        <div class="col-md-6">
                            <label class="form-label">First Name *</label>
                            <input id="fname" class="form-control" required>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Last Name *</label>
                            <input id="lname" class="form-control" required>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Email *</label>
                            <input id="email" type="email" class="form-control" required>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Phone *</label>
                            <input id="phone" class="form-control" minlength="10" maxlength="10" required>
                        </div>

                        <div class="col-md-12">
                            <label class="form-label">Street Address *</label>
                            <input id="address" class="form-control" required>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">City *</label>
                            <input id="city" class="form-control" required>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">State *</label>
                            <input id="state" class="form-control" required>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">ZIP Code *</label>
                            <input id="zip" class="form-control" required>
                        </div>

                    </div>

                    <hr class="my-4">

                    <h5 class="mb-2">Payment Method</h5>

                    <div id="paymentMethods">
                        <div class="pay-box active" data-pay="card">
                            <i class="bi bi-credit-card fs-4"></i> Card Payment
                        </div>
                        <div class="pay-box" data-pay="upi">
                            <i class="bi bi-upc-scan fs-4"></i> UPI
                        </div>
                        <div class="pay-box" data-pay="cod">
                            <i class="bi bi-cash fs-4"></i> Cash on Delivery
                        </div>
                    </div>

                    

                    <div id="cardSection">
                        <label class="form-label">Card Number *</label>
                        <input id="cardNumber" class="form-control mb-3" placeholder="1234 5678 9012 3456">

                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Expiry *</label>
                                <input id="expiry" class="form-control" placeholder="MM/YY">
                            </div>

                            <div class="col-md-6">
                                <label class="form-label">CVV *</label>
                                <input id="cvv" class="form-control" placeholder="123">
                            </div>
                        </div>

                        <label class="form-label mt-3">Name on Card *</label>
                        <input id="cardName" class="form-control">
                    </div>

                    <button class="place-order-btn" type="submit">Place Order</button>

                </form>

            </div>
        </div>
    </div>
</div>

</div> 
<script>


function loadCheckoutData() {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    let box = document.getElementById("order-summary-items");

    let subtotal = 0;

    box.innerHTML = cart.map(item => {
        let price = Number(item.price.replace("₹",""));
        subtotal += price * (item.qty || 1);

        return `
            <div class="order-item">
                <img src="${item.img}">
                <div>
                    <p class="m-0 fw-bold">${item.name}</p>
                    <small>₹${price} × ${item.qty || 1}</small>
                </div>
            </div>
        `;
    }).join("");

    let gst = subtotal * 0.18;
    let total = subtotal + gst + 50;

    document.getElementById("subtotal").innerText = "₹" + subtotal;
    document.getElementById("gst").innerText = "₹" + gst.toFixed(2);
    document.getElementById("totalAmount").innerText = "₹" + total.toFixed(2);
}
loadCheckoutData();



let payBoxes = document.querySelectorAll(".pay-box");
payBoxes.forEach(box => {
    box.onclick = () => {
        payBoxes.forEach(b => b.classList.remove("active"));
        box.classList.add("active");

        let type = box.dataset.pay;
        document.getElementById("cardSection").style.display = type === "card" ? "block" : "none";
    };
});



document.getElementById("checkoutForm").addEventListener("submit", function(e){
    e.preventDefault();

    let payType = document.querySelector(".pay-box.active").dataset.pay;


    if (payType === "card") {
        if (cardNumber.value.length < 16 || cvv.value.length < 3) {
            alert("Enter valid card details");
            return;
        }
    }

    
    document.getElementById("checkout-page").innerHTML = `
        <div class="d-flex justify-content-center mt-5">
            <div class="success-box">
                <i class="bi bi-check-circle-fill"></i>
                <h2 class="mt-3">Thank You for Your Purchase!</h2>
                <p>Your order has been placed successfully.</p>
                <a href="homepage.html" class="btn btn-dark mt-3">Go to Home</a>
            </div>
        </div>
    `;

    localStorage.removeItem("cart");
});
</script>

</body>
</html>
